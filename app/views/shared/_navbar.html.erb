<nav class='navbar mx-6'>
  <div class='navbar-brand' data-controller='stimulus'>
    <% if member_signed_in? %>
      <%= link_to root_path, class: 'p-3' do %>
        <figure class='image is-48x48'>
          <%= render 'members/thumb', member: current_member %>
        </figure>
      <% end %>
    <% else %>
      <h1 class='has-text-info-dark has-text-weight-semibold is-size-4 navbar-item'>Blog app</h1>
    <% end %>
    <a role='button' class='navbar-burger' aria-label='menu' aria-expanded='false' data-target='navbarBlog' data-action='stimulus#mobile_menu'>
      <span aria-hidden='true'></span>
      <span aria-hidden='true'></span>
      <span aria-hidden='true'></span>
    </a>
  </div>
  <div class='navbar-menu' id='navbarBlog'>
    <div class='navbar-start'>
      <div class="navbar-item">
        <%= link_to 'API endpoints', rswag_api_path, class: 'button is-warning is-light is-hidden-touch', target: :_blank %>
      </div>
      <%= link_to 'API endpoints', rswag_api_path, class: 'is-hidden-desktop navbar-item', target: :_blank %>
      <% if member_signed_in? %>
        <div class="navbar-item is-hidden-touch">
          <%= link_to 'Add post',
            new_member_post_path(current_member),
            class: 'button is-warning is-light',
            data: {
              turbo_frame: 'new_post',
              controller: 'stimulus',
              action: 'stimulus#open_modal'  
            }
          %>
        </div>
        <%= link_to 'Add post',
          new_member_post_path(current_member),
          class: 'is-hidden-desktop navbar-item',
          data: {
            turbo_frame: 'new_post',
            controller: 'stimulus',
            action: 'stimulus#open_modal'  
          }
        %>
        <%= link_to 'Edit profile', edit_member_registration_path, class: 'is-hidden-desktop navbar-item' %>
        <%= link_to 'Sign out', destroy_member_session_path, data: { turbo_method: :delete }, class: 'is-hidden-desktop navbar-item' %>
      <% else %>
        <%= link_to 'Sign up', new_member_registration_path, class: 'is-hidden-desktop navbar-item' %>
        <%= link_to 'Sign in', new_member_session_path, class: 'is-hidden-desktop navbar-item' %>
      <% end %>
    </div>
    <div class='navbar-end is-hidden-touch'>
      <% if member_signed_in? %>
        <div class="navbar-item has-text-warning-dark">
          <%= current_member.email %>
        </div>
        <div class='navbar-item'>
          <%= link_to 'Edit profile', edit_member_registration_path, class: 'button is-warning is-light' %>
        </div>
        <div class='navbar-item'>
          <%= link_to 'Sign out', destroy_member_session_path, data: { turbo_method: :delete }, class: 'button is-warning is-light' %>
        </div>
      <% else %>
        <div class='navbar-item'>
          <%= link_to 'Sign up', new_member_registration_path, class: 'button is-warning is-light' %>
        </div>
        <div class='navbar-item'>
          <%= link_to 'Sign in', new_member_session_path, class: 'button is-warning is-light' %>
        </div>
      <% end %>
    </div>
  </div>
</nav>